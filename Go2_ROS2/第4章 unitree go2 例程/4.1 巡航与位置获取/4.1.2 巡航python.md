colcon build --packages-select go2_tutorial_py
. install/setup.bash
ros2 launch go2_tutorial_py go2_ctrl.launch.py

1. launch下创建 go2_ctrl.launch.py ,并补充以下内容：
```
def generate_launch_description():
return LaunchDescription([
Node(
package="go2_tutorial_py",
executable="go2_ctrl"
)
])
```
2. 将base 下的  go2_twist_bridge.py 的 sport_model.py 复制到 go2_tutorial.py 下
3. go2_ctrl.py :
静态速度
```
"""
需求：动态调参控制运动
"""

import rclpy
from rclpy.node import Node
from unitree_api.msg import Request
from .sport_model import ROBOT_SPORT_API_IDS
import json

class Go2Ctrl(Node):
def __init__(self):
super().__init__('go2_ctrl') 

#设置参数

# 1.创建发布对象
self.create_publisher(Request,"/api/sport/request",10)
# 2.创建定时器，并周期性发布速度指令
self.timer = self.create_timer(0.1,self.on_timer)
  
def on_timer(self):
# 3.发布速度指令
request = Request()
request.header.identity.api_id = ROBOT_SPORT_API_IDS["MOVE"]
  

js = {
"x": 0.1,
"y": 0.0,
"z": 0.5,
}

request.parameter = json.dumps(js)
  
self.req_pub.publish(request)


def main():
rclpy.init()
rclpy.spin(Go2Ctrl())
rclpy.shutdown() 

if __name__ == '__main__':
main()
```
动态参数：
```
"""

需求：动态调参控制运动

  

"""

import rclpy

from rclpy.node import Node

from unitree_api.msg import Request

from .sport_model import ROBOT_SPORT_API_IDS

import json

  

class Go2Ctrl(Node):

def __init__(self):

super().__init__('go2_ctrl')

  

#设置参数

self.declare_parameter("sport_api_id",ROBOT_SPORT_API_IDS["BALANCESTAND"])

self.declare_parameter("x",0.0)

self.declare_parameter("y",0.0)

self.declare_parameter("z",0.0)

  

# 1.创建发布对象

self.req_pub = self.create_publisher(Request,"/api/sport/request",10)

# 2.创建定时器，并周期性发布速度指令

self.timer = self.create_timer(0.1,self.on_timer)

  

def on_timer(self):

# 3.发布速度指令

request = Request()

  

id = self.get_parameter("sport_api_id").get_parameter_value().integer_value

request.header.identity.api_id = id

  

if id ==ROBOT_SPORT_API_IDS["MOVE"]:

js = {

"x": self.get_parameter("x").get_parameter_value().double_value,

"y": self.get_parameter("y").get_parameter_value().double_value,

"z": self.get_parameter("z").get_parameter_value().double_value,

}

request.parameter = json.dumps(js)

# 发布

self.req_pub.publish(request)

  

def main():

rclpy.init()

rclpy.spin(Go2Ctrl())

rclpy.shutdown()

  

if __name__ == '__main__':

main()
```